<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" template="../../templates/ui.xhtml">

	<ui:define name="content">
		<h:form id="driverOverviewBreadCrumbForm" prependId="false">
			<p:breadCrumb model="#{driverOverviewBean.breadCrumbTrail}"
				ajax="false" immediate="true" />
		</h:form>
		<!-- Message display -->
		<p:scrollPanel style="height:50px;" mode="native">
			<p:messages id="messages" showSummary="false" showDetail="true"
				autoUpdate="true" />
		</p:scrollPanel>

		<h:form id="driverOverviewForm" prependId="false">
 
			<!-- Driver Detail Panel -->
			<p:panel id="driverDetailPanel" header="Driver Details"
				styleClass="ui-layout">
				<h:panelGrid columns="5" cellpadding="1">
					<h:outputText value="Driver" styleClass="ui-label" />
					<h:outputText value="#{driverOverviewBean.driver.driverSurname}, #{driverOverviewBean.driver.driverForename}" />
					<p:spacer width="100" height="1" />
					<h:outputText value="Client" styleClass="ui-label" />
					<h:outputText value="#{driverOverviewBean.driver.externalAccount.externalAccountPK.accountCode} - #{driverOverviewBean.driver.externalAccount.accountName}" />
				</h:panelGrid>
			</p:panel>
 
			<p:panel id="driverOverviewPanel" header="Driver Overview" styleClass="ui-layout">


				<p:dataTable var="allocation" value="#{driverOverviewBean.allocations}">  
					<p:column width="500">
						<f:facet name="header">
							<h:outputText value="Units" style="font-weight:bold" />
						</f:facet>
						<h:outputText value="#{allocation.fleetMaster.unitNo} - #{allocation.fleetMaster.model.modelDescription}" /> 
            		</p:column>  
					<p:column width="100">
						<f:facet name="header">
							<h:outputText value="From" style="font-weight:bold" />
						</f:facet>
			        	<h:outputText value="#{allocation.allocationDate}" >
	    		            <f:convertDateTime pattern="MM/dd/yyyy" />
	            		</h:outputText>  
            		</p:column>  
					<p:column width="100">
						<f:facet name="header">
							<h:outputText value="To" style="font-weight:bold" />
						</f:facet>
			        	<h:outputText value="#{allocation.deallocationDate}" >
	    		            <f:convertDateTime pattern="MM/dd/yyyy" />
	            		</h:outputText>  
            		</p:column>  
		        </p:dataTable>  
		        
		        <p:spacer height="10" />

				<p:panelGrid columns="2" style="width: 80%">
					<p:dataTable var="address" value="#{driverOverviewBean.garagedAddresses}" styleClass="ui-panelgrid-border" style="min-width:380px">  
						<p:column width="230%">
							<f:facet name="header">
								<h:outputText value="Garaged Addresses" style="font-weight:bold" />
							</f:facet>
							<h:outputText value="#{address.businessAddressLine}" /> 
						 	<h:outputText value=" &lt;br /&gt; "  rendered="#{address.businessAddressLine != null ? 'true': 'false'}"  escape="false" />
	   						<h:outputText value="#{address.displayAddressLine1}" /> <br /> 
	   						<h:outputText value="#{address.displayAddressLine2}" /> <br />
	   						<h:outputText value="#{address.displayAddressLine2Details}" />
	            		</p:column>  
						<p:column width="100%">
							<f:facet name="header">
								<h:outputText value="From" style="font-weight:bold" />
							</f:facet>
				        	<h:outputText value="#{address.fromDate}" >
		    		            <f:convertDateTime pattern="MM/dd/yyyy" />
		            		</h:outputText>  
	            		</p:column>  
						<p:column width="100%">
							<f:facet name="header">
								<h:outputText value="To" style="font-weight:bold" />
							</f:facet>
				        	<h:outputText value="#{address.toDate}" >
		    		            <f:convertDateTime pattern="MM/dd/yyyy" />
		            		</h:outputText>  
	            		</p:column>  
			        </p:dataTable>  
	
	
					<p:dataTable var="address" value="#{driverOverviewBean.postAddresses}" styleClass="ui-panelgrid-border" style="min-width:380px">  
						<p:column width="230%">
							<f:facet name="header">
								<h:outputText value="Post Addresses" style="font-weight:bold" />
							</f:facet>
							<h:outputText value="#{address.businessAddressLine}" /> 
						 	<h:outputText value=" &lt;br /&gt; "  rendered="#{address.businessAddressLine != null ? 'true': 'false'}"  escape="false" />
	   						<h:outputText value="#{address.displayAddressLine1}" /> <br /> 
	   						<h:outputText value="#{address.displayAddressLine2}" /> <br />
	   						<h:outputText value="#{address.displayAddressLine2Details}" />
	            		</p:column>  
						<p:column width="100%">
							<f:facet name="header">
								<h:outputText value="From" style="font-weight:bold" />
							</f:facet>
				        	<h:outputText value="#{address.fromDate}" >
		    		            <f:convertDateTime pattern="MM/dd/yyyy" />
		            		</h:outputText>  
	            		</p:column>  
						<p:column width="100%">
							<f:facet name="header">
								<h:outputText value="To" style="font-weight:bold" />
							</f:facet>
				        	<h:outputText value="#{address.toDate}" >
		    		            <f:convertDateTime pattern="MM/dd/yyyy" />
		            		</h:outputText>  
	            		</p:column>  
			        </p:dataTable>  

				</p:panelGrid>
			    
			    <p:spacer height="10" />
				
				<p:dataTable var="costCenter" value="#{driverOverviewBean.costCenters}">  
					<p:column width="500">
						<f:facet name="header">
							<h:outputText value="Cost Centers" style="font-weight:bold" />
						</f:facet>
						<h:outputText value="#{costCenter.driverCostCenter.costCenterCode} - #{costCenter.costCenterDescription}" />  
            		</p:column>  
					<p:column width="100">
						<f:facet name="header">
							<h:outputText value="From" style="font-weight:bold" />
						</f:facet>
			        	<h:outputText value="#{costCenter.driverCostCenter.dateAllocated}" >
	    		            <f:convertDateTime pattern="MM/dd/yyyy" />
	            		</h:outputText>  
            		</p:column>  
					<p:column width="100">
						<f:facet name="header">
							<h:outputText value="To" style="font-weight:bold" />
						</f:facet>
			        	<h:outputText value="#{costCenter.driverCostCenter.effectiveToDate}" >
	    		            <f:convertDateTime pattern="MM/dd/yyyy" />
	            		</h:outputText>  
            		</p:column>  
		        </p:dataTable>  


			</p:panel>
			
			<p:panel id="controlPanel" styleClass="ui-layout">
				<p:commandButton id="cancel" tabindex="1" value="Cancel"
					action="#{driverOverviewBean.cancel}" ajax="false"
					onclick="lockScreen();" immediate="true" />
			</p:panel>
		</h:form>



	</ui:define>

</ui:composition>